<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="/media/logo.png">
  <title>My Profile - myMart</title>
  <style>
    /* ===== General Styles ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: #AED6CF;
      color: #333;
      line-height: 1.6;
    }

    /* ===== Navbar ===== */
    nav {
      background: #91ADC8;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .logo img {
      height: 50px;
    }

    .nav-links {
      display: flex;
      gap: 20px;
      list-style: none;
    }

    .nav-links a {
      text-decoration: none;
      color: #fff;
      font-size: 16px;
      transition: color 0.3s;
      font-weight: 500;
    }

    .nav-links a:hover {
      color: #ffcc00;
    }

    .nav-links a.active {
      color: #ffcc00;
      font-weight: 600;
    }

    .search-bar {
      flex: 1;
      margin: 0 30px;
      position: relative;
    }

    .search-bar input {
      width: 90%;
      padding: 10px 16px;
      border-radius: 20px;
      border: none;
      outline: none;
      font-size: 15px;
    }

    .search-btn {
      position: absolute;
      right: 40px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #666;
      cursor: pointer;
    }

    .actions {
      display: flex;
      gap: 15px;
    }

    .actions a {
      color: #fff;
      text-decoration: none;
      font-size: 16px;
      background: #ff7a18;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background 0.3s;
      font-weight: 500;
    }

    .actions a:hover {
      background: #e26500;
    }

    .cart-count {
      background: #ff3333;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 12px;
      position: absolute;
      top: -5px;
      right: -5px;
    }

    .cart-link {
      position: relative;
    }

    /* ===== Toggle Button ===== */
    .menu-toggle {
      display: none;
      flex-direction: column;
      cursor: pointer;
    }

    .menu-toggle div {
      width: 25px;
      height: 3px;
      background: white;
      margin: 4px 0;
      transition: 0.3s;
    }

    /* ===== Profile Container ===== */
    .profile-container {
      max-width: 1200px;
      margin: 100px auto 50px;
      padding: 0 20px;
    }

    .profile-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }

    .profile-header h1 {
      font-size: 32px;
      color: #333;
    }

    .profile-actions {
      display: flex;
      gap: 15px;
    }

    .btn {
      padding: 12px 20px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }

    .btn-primary {
      background: #ff7a18;
      color: #fff;
    }

    .btn-primary:hover {
      background: #e26500;
    }

    .btn-secondary {
      background: #3498db;
      color: #fff;
    }

    .btn-secondary:hover {
      background: #2980b9;
    }

    .btn-outline {
      background: transparent;
      color: #666;
      border: 1px solid #ccc;
    }

    .btn-outline:hover {
      background: #f0f0f0;
    }

    .btn-danger {
      background: #e74c3c;
      color: #fff;
    }

    .btn-danger:hover {
      background: #c0392b;
    }

    /* ===== Profile Content ===== */
    .profile-content {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 30px;
    }

    /* ===== Sidebar ===== */
    .profile-sidebar {
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      padding: 30px;
      height: fit-content;
    }

    .user-info {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }

    .user-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: #ff7a18;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      font-weight: bold;
      margin: 0 auto 15px;
    }

    .user-info h2 {
      font-size: 20px;
      margin-bottom: 5px;
      color: #333;
    }

    .user-info p {
      color: #666;
      font-size: 14px;
    }

    .profile-menu {
      list-style: none;
    }

    .profile-menu li {
      margin-bottom: 10px;
    }

    .profile-menu a {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      text-decoration: none;
      color: #666;
      border-radius: 6px;
      transition: all 0.3s;
    }

    .profile-menu a:hover {
      background: #f5f5f5;
      color: #333;
    }

    .profile-menu a.active {
      background: rgba(255, 122, 24, 0.1);
      color: #ff7a18;
      font-weight: 600;
    }

    .menu-icon {
      margin-right: 10px;
      font-size: 18px;
    }

    /* ===== Main Content ===== */
    .profile-main {
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      padding: 30px;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    .tab-header {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }

    .tab-header h2 {
      font-size: 24px;
      color: #333;
    }

    .tab-header p {
      color: #666;
      margin-top: 5px;
    }

    /* ===== Personal Info Form ===== */
    .form-section {
      margin-bottom: 30px;
    }

    .form-section h3 {
      font-size: 18px;
      margin-bottom: 15px;
      color: #333;
      display: flex;
      align-items: center;
    }

    .form-section h3::before {
      content: "‚Ä¢";
      color: #ff7a18;
      margin-right: 8px;
      font-size: 24px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e1e5e9;
      border-radius: 8px;
      font-size: 16px;
      transition: all 0.3s;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: #ff7a18;
      outline: none;
      box-shadow: 0 0 0 3px rgba(255, 122, 24, 0.2);
    }

    .form-group textarea {
      resize: none;
      height: 100px;
    }

    .form-actions {
      display: flex;
      gap: 15px;
      margin-top: 30px;
    }

    /* ===== Order History ===== */
    .order-card {
      border: 1px solid #e1e5e9;
      border-radius: 8px;
      margin-bottom: 20px;
      overflow: hidden;
    }

    .order-header {
      background: #f9f9f9;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .order-id {
      font-weight: bold;
      color: #ff7a18;
    }

    .order-date {
      color: #666;
    }

    .order-status {
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
    }

    .status-delivered {
      background: #e6ffe6;
      color: #2e7d32;
    }

    .status-pending {
      background: #fff3e0;
      color: #f57c00;
    }

    .status-shipped {
      background: #e3f2fd;
      color: #1976d2;
    }

    .order-items {
      padding: 20px;
    }

    .order-item {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }

    .order-item:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }

    .order-item img {
      width: 60px;
      height: 60px;
      border-radius: 6px;
      object-fit: cover;
      margin-right: 15px;
    }

    .order-item-details {
      flex: 1;
    }

    .order-item-details h4 {
      font-size: 16px;
      margin-bottom: 5px;
      color: #333;
    }

    .order-item-details p {
      color: #666;
      font-size: 14px;
    }

    .order-footer {
      padding: 15px 20px;
      background: #f9f9f9;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .order-total {
      font-weight: bold;
      color: #333;
    }

    .order-actions {
      display: flex;
      gap: 10px;
    }

    /* ===== Address Book ===== */
    .address-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .address-card {
      border: 1px solid #e1e5e9;
      border-radius: 8px;
      padding: 20px;
      position: relative;
    }

    .address-card.default {
      border-color: #ff7a18;
      background: rgba(255, 122, 24, 0.05);
    }

    .address-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .address-title {
      font-weight: bold;
      color: #333;
    }

    .default-badge {
      background: #ff7a18;
      color: white;
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
    }

    .address-details p {
      margin-bottom: 8px;
      color: #666;
    }

    .address-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .add-address-card {
      border: 2px dashed #ccc;
      border-radius: 8px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
      min-height: 200px;
    }

    .add-address-card:hover {
      border-color: #ff7a18;
      background: rgba(255, 122, 24, 0.05);
    }

    .add-icon {
      font-size: 40px;
      color: #ccc;
      margin-bottom: 15px;
    }

    .add-address-card p {
      color: #666;
      font-weight: 600;
    }

    /* ===== Wishlist ===== */
    .wishlist-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
    }

    .wishlist-item {
      border: 1px solid #e1e5e9;
      border-radius: 8px;
      overflow: hidden;
      transition: transform 0.3s;
    }

    .wishlist-item:hover {
      transform: translateY(-5px);
    }

    .wishlist-item img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }

    .wishlist-item-details {
      padding: 15px;
    }

    .wishlist-item-details h4 {
      font-size: 16px;
      margin-bottom: 10px;
      color: #333;
    }

    .wishlist-item-details p {
      font-size: 16px;
      color: #0b63ff;
      font-weight: bold;
      margin-bottom: 15px;
    }

    .wishlist-actions {
      display: flex;
      gap: 10px;
    }

    .wishlist-actions .btn {
      padding: 8px 12px;
      font-size: 14px;
      flex: 1;
    }

    /* ===== Toast Notification ===== */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #333;
      color: white;
      padding: 12px 20px;
      border-radius: 4px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 10000;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
    }

    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    /* ===== Modal ===== */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 10000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      padding: 30px;
      position: relative;
      animation: modalFadeIn 0.3s ease;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-header h2 {
      font-size: 24px;
      color: #333;
    }

    .close-modal {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
    }

    /* ===== Animations ===== */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes modalFadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    /* ===== Responsive Design ===== */
    @media (max-width: 992px) {
      .profile-content {
        grid-template-columns: 1fr;
      }
      
      .profile-sidebar {
        order: 2;
      }
      
      .profile-main {
        order: 1;
      }
    }

    @media (max-width: 768px) {
      .menu-toggle {
        display: flex;
      }

      .nav-links,
      .actions,
      .search-bar {
        display: none;
        flex-direction: column;
        background: #91ADC8;
        width: 100%;
        position: absolute;
        top: 70px;
        left: 0;
        text-align: center;
        padding: 15px 0;
      }

      .nav-links.active,
      .actions.active,
      .search-bar.active {
        display: flex;
      }

      .profile-container {
        margin-top: 80px;
        padding: 0 15px;
      }

      .profile-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .address-grid {
        grid-template-columns: 1fr;
      }

      .wishlist-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
    }

    @media (max-width: 480px) {
      .profile-header h1 {
        font-size: 28px;
      }

      .order-header,
      .order-footer {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }

      .order-actions {
        width: 100%;
      }

      .order-actions .btn {
        flex: 1;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav>
    <div class="logo"><img src="/media/logo.png" alt="myMart logo"></div>

    <div class="menu-toggle" onclick="toggleMenu()">
      <div></div>
      <div></div>
      <div></div>
    </div>

    <ul class="nav-links">
      <li><a href="homePage.html">Home</a></li>
      <li><a href="shop.html">Shop</a></li>
      <li><a href="deals.html">Deals</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>

    <div class="search-bar">
      <input type="text" placeholder="Search for products..." id="searchInput">
      <button class="search-btn" onclick="searchProducts()">üîç</button>
    </div>

    <div class="actions">
      <a href="#" id="logoutBtn">Logout</a>
      <a href="cart.html" class="cart-link">Cart üõí <span class="cart-count">0</span></a>
    </div>
  </nav>

  <!-- Profile Container -->
  <div class="profile-container">
    <div class="profile-header">
      <h1>My Account</h1>
      <div class="profile-actions">
        <a href="homePage.html" class="btn btn-outline">‚Üê Back to Shopping</a>
      </div>
    </div>

    <div class="profile-content">
      <!-- Sidebar -->
      <div class="profile-sidebar">
        <div class="user-info">
          <div class="user-avatar" id="userAvatar">JS</div>
          <h2 id="userName">John Smith</h2>
          <p id="userEmail">john.smith@example.com</p>
        </div>

        <ul class="profile-menu">
          <li><a href="#" class="active" data-tab="personal"><span class="menu-icon">üë§</span> Personal Information</a></li>
          <li><a href="#" data-tab="orders"><span class="menu-icon">üì¶</span> Order History</a></li>
          <li><a href="#" data-tab="addresses"><span class="menu-icon">üè†</span> Address Book</a></li>
          <li><a href="#" data-tab="wishlist"><span class="menu-icon">‚ù§Ô∏è</span> Wishlist</a></li>
          <li><a href="#" data-tab="security"><span class="menu-icon">üîí</span> Security</a></li>
        </ul>
      </div>

      <!-- Main Content -->
      <div class="profile-main">
        <!-- Personal Information Tab -->
        <div class="tab-content active" id="personal-tab">
          <div class="tab-header">
            <h2>Personal Information</h2>
            <p>Manage your personal details and preferences</p>
          </div>

          <form id="personalInfoForm">
            <div class="form-section">
              <h3>Basic Information</h3>
              <div class="form-row">
                <div class="form-group">
                  <label for="firstName">First Name</label>
                  <input type="text" id="firstName" value="John" required>
                </div>
                <div class="form-group">
                  <label for="lastName">Last Name</label>
                  <input type="text" id="lastName" value="Smith" required>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="email">Email Address</label>
                  <input type="email" id="email" value="john.smith@example.com" required>
                </div>
                <div class="form-group">
                  <label for="phone">Phone Number</label>
                  <input type="tel" id="phone" value="+1 (555) 123-4567" required>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>Additional Information</h3>
              <div class="form-row">
                <div class="form-group">
                  <label for="birthdate">Date of Birth</label>
                  <input type="date" id="birthdate" value="1990-05-15">
                </div>
                <div class="form-group">
                  <label for="gender">Gender</label>
                  <select id="gender">
                    <option value="">Select Gender</option>
                    <option value="male" selected>Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                    <option value="prefer-not-to-say">Prefer not to say</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>Communication Preferences</h3>
              <div class="form-group">
                <label>
                  <input type="checkbox" id="emailNotifications" checked> 
                  Send me email notifications about new products and promotions
                </label>
              </div>
              <div class="form-group">
                <label>
                  <input type="checkbox" id="smsNotifications"> 
                  Send me SMS notifications about order updates
                </label>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-outline">Cancel</button>
              <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
          </form>
        </div>

        <!-- Order History Tab -->
        <div class="tab-content" id="orders-tab">
          <div class="tab-header">
            <h2>Order History</h2>
            <p>View and track your recent orders</p>
          </div>

          <div class="order-card">
            <div class="order-header">
              <div>
                <span class="order-id">Order #MYMART-12345</span>
                <span class="order-date">Placed on March 15, 2025</span>
              </div>
              <span class="order-status status-delivered">Delivered</span>
            </div>
            <div class="order-items">
              <div class="order-item">
                <img src="/media/laptop.png" alt="Laptop">
                <div class="order-item-details">
                  <h4>Laptop</h4>
                  <p>Quantity: 1</p>
                </div>
                <div class="order-price">$63,579</div>
              </div>
              <div class="order-item">
                <img src="/media/earbuds.png" alt="Earbuds">
                <div class="order-item-details">
                  <h4>Wireless Earbuds</h4>
                  <p>Quantity: 1</p>
                </div>
                <div class="order-price">$2,999</div>
              </div>
            </div>
            <div class="order-footer">
              <div class="order-total">Total: $66,578</div>
              <div class="order-actions">
                <button class="btn btn-outline">View Details</button>
                <button class="btn btn-primary">Reorder</button>
              </div>
            </div>
          </div>

          <div class="order-card">
            <div class="order-header">
              <div>
                <span class="order-id">Order #MYMART-12344</span>
                <span class="order-date">Placed on March 10, 2025</span>
              </div>
              <span class="order-status status-shipped">Shipped</span>
            </div>
            <div class="order-items">
              <div class="order-item">
                <img src="/media/shirt.webp" alt="Formal Shirt">
                <div class="order-item-details">
                  <h4>Formal Shirt</h4>
                  <p>Quantity: 2</p>
                </div>
                <div class="order-price">$1,398</div>
              </div>
            </div>
            <div class="order-footer">
              <div class="order-total">Total: $1,398</div>
              <div class="order-actions">
                <button class="btn btn-outline">Track Order</button>
                <button class="btn btn-primary">View Details</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Address Book Tab -->
        <div class="tab-content" id="addresses-tab">
          <div class="tab-header">
            <h2>Address Book</h2>
            <p>Manage your shipping addresses</p>
          </div>

          <div class="address-grid">
            <div class="address-card default">
              <div class="address-header">
                <span class="address-title">Home</span>
                <span class="default-badge">Default</span>
              </div>
              <div class="address-details">
                <p><strong>John Smith</strong></p>
                <p>123 Main Street</p>
                <p>Apartment 4B</p>
                <p>New York, NY 10001</p>
                <p>United States</p>
                <p>Phone: +1 (555) 123-4567</p>
              </div>
              <div class="address-actions">
                <button class="btn btn-outline">Edit</button>
                <button class="btn btn-outline">Remove</button>
              </div>
            </div>

            <div class="address-card">
              <div class="address-header">
                <span class="address-title">Work</span>
              </div>
              <div class="address-details">
                <p><strong>John Smith</strong></p>
                <p>456 Business Avenue</p>
                <p>Floor 10</p>
                <p>New York, NY 10002</p>
                <p>United States</p>
                <p>Phone: +1 (555) 987-6543</p>
              </div>
              <div class="address-actions">
                <button class="btn btn-outline">Edit</button>
                <button class="btn btn-outline">Set as Default</button>
                <button class="btn btn-outline">Remove</button>
              </div>
            </div>

            <div class="add-address-card" onclick="openAddAddressModal()">
              <div class="add-icon">+</div>
              <p>Add New Address</p>
            </div>
          </div>
        </div>

        <!-- Wishlist Tab -->
        <div class="tab-content" id="wishlist-tab">
          <div class="tab-header">
            <h2>My Wishlist</h2>
            <p>Items you've saved for later</p>
          </div>

          <div class="wishlist-grid">
            <div class="wishlist-item">
              <img src="/media/camera.png" alt="Camera">
              <div class="wishlist-item-details">
                <h4>Professional Camera</h4>
                <p>$12,999</p>
                <div class="wishlist-actions">
                  <button class="btn btn-outline">Remove</button>
                  <button class="btn btn-primary">Add to Cart</button>
                </div>
              </div>
            </div>

            <div class="wishlist-item">
              <img src="/media/speaker.png" alt="Speaker">
              <div class="wishlist-item-details">
                <h4>Wireless Speaker</h4>
                <p>$7,999</p>
                <div class="wishlist-actions">
                  <button class="btn btn-outline">Remove</button>
                  <button class="btn btn-primary">Add to Cart</button>
                </div>
              </div>
            </div>

            <div class="wishlist-item">
              <img src="/media/shoe.webp" alt="Running Shoes">
              <div class="wishlist-item-details">
                <h4>Running Shoes</h4>
                <p>$999</p>
                <div class="wishlist-actions">
                  <button class="btn btn-outline">Remove</button>
                  <button class="btn btn-primary">Add to Cart</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Security Tab -->
        <div class="tab-content" id="security-tab">
          <div class="tab-header">
            <h2>Security Settings</h2>
            <p>Manage your password and account security</p>
          </div>

          <form id="securityForm">
            <div class="form-section">
              <h3>Change Password</h3>
              <div class="form-group">
                <label for="currentPassword">Current Password</label>
                <input type="password" id="currentPassword" required>
              </div>
              <div class="form-group">
                <label for="newPassword">New Password</label>
                <input type="password" id="newPassword" required>
              </div>
              <div class="form-group">
                <label for="confirmPassword">Confirm New Password</label>
                <input type="password" id="confirmPassword" required>
              </div>
            </div>

            <div class="form-section">
              <h3>Two-Factor Authentication</h3>
              <div class="form-group">
                <label>
                  <input type="checkbox" id="twoFactorAuth"> 
                  Enable two-factor authentication for added security
                </label>
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary">Update Security Settings</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Address Modal -->
  <div class="modal" id="addAddressModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Add New Address</h2>
        <button class="close-modal" onclick="closeAddAddressModal()">&times;</button>
      </div>
      <form id="addAddressForm">
        <div class="form-group">
          <label for="addressTitle">Address Title</label>
          <input type="text" id="addressTitle" placeholder="Home, Work, etc." required>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="addressFirstName">First Name</label>
            <input type="text" id="addressFirstName" required>
          </div>
          <div class="form-group">
            <label for="addressLastName">Last Name</label>
            <input type="text" id="addressLastName" required>
          </div>
        </div>
        <div class="form-group">
          <label for="addressStreet">Street Address</label>
          <input type="text" id="addressStreet" required>
        </div>
        <div class="form-group">
          <label for="addressApartment">Apartment, Suite, etc. (Optional)</label>
          <input type="text" id="addressApartment">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="addressCity">City</label>
            <input type="text" id="addressCity" required>
          </div>
          <div class="form-group">
            <label for="addressZip">ZIP Code</label>
            <input type="text" id="addressZip" required>
          </div>
        </div>
        <div class="form-group">
          <label for="addressCountry">Country</label>
          <select id="addressCountry" required>
            <option value="">Select Country</option>
            <option value="india">India</option>
            <option value="usa" selected>United States</option>
            <option value="uk">United Kingdom</option>
          </select>
        </div>
        <div class="form-group">
          <label for="addressPhone">Phone Number</label>
          <input type="tel" id="addressPhone" required>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="setAsDefault"> 
            Set as default address
          </label>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-outline" onclick="closeAddAddressModal()">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Address</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <script>
    // User data - load from registered user
    let currentUser = JSON.parse(localStorage.getItem('currentUser'));
    let user = currentUser ? currentUser.profile : {
      firstName: 'John',
      lastName: 'Smith',
      email: 'john.smith@example.com',
      phone: '+1 (555) 123-4567',
      birthdate: '1990-05-15',
      gender: 'male',
      emailNotifications: true,
      smsNotifications: false
    };

    // Cart data
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      updateCartCount();
      loadUserData();
      setupTabNavigation();
      setupFormSubmissions();
      
      // Redirect to login if no user is logged in
      if (!currentUser) {
        window.location.href = 'login.html';
      }
    });

    // Toggle mobile menu
    function toggleMenu() {
      document.querySelector(".nav-links").classList.toggle("active");
      document.querySelector(".search-bar").classList.toggle("active");
      document.querySelector(".actions").classList.toggle("active");
    }

    // Update cart count in navbar
    function updateCartCount() {
      const cartCount = document.querySelector('.cart-count');
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      cartCount.textContent = totalItems;
    }

    // Load user data
    function loadUserData() {
      if (!currentUser) return;
      
      // Update user avatar
      const userAvatar = document.getElementById('userAvatar');
      userAvatar.textContent = user.firstName.charAt(0) + user.lastName.charAt(0);
      
      // Update user name and email
      document.getElementById('userName').textContent = `${user.firstName} ${user.lastName}`;
      document.getElementById('userEmail').textContent = user.email;
      
      // Populate form fields
      document.getElementById('firstName').value = user.firstName;
      document.getElementById('lastName').value = user.lastName;
      document.getElementById('email').value = user.email;
      document.getElementById('phone').value = user.phone;
      document.getElementById('birthdate').value = user.birthdate;
      document.getElementById('gender').value = user.gender;
      document.getElementById('emailNotifications').checked = user.emailNotifications;
      document.getElementById('smsNotifications').checked = user.smsNotifications;
    }

    // Setup tab navigation
    function setupTabNavigation() {
      const tabLinks = document.querySelectorAll('.profile-menu a');
      
      tabLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          
          // Remove active class from all tabs
          tabLinks.forEach(l => l.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.remove('active');
          });
          
          // Add active class to clicked tab
          this.classList.add('active');
          const tabId = this.getAttribute('data-tab') + '-tab';
          document.getElementById(tabId).classList.add('active');
        });
      });
    }

    // Setup form submissions
    function setupFormSubmissions() {
      // Personal info form
      document.getElementById('personalInfoForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Update user data
        user.firstName = document.getElementById('firstName').value;
        user.lastName = document.getElementById('lastName').value;
        user.email = document.getElementById('email').value;
        user.phone = document.getElementById('phone').value;
        user.birthdate = document.getElementById('birthdate').value;
        user.gender = document.getElementById('gender').value;
        user.emailNotifications = document.getElementById('emailNotifications').checked;
        user.smsNotifications = document.getElementById('smsNotifications').checked;
        
        // Update current user session
        if (currentUser) {
          currentUser.profile = user;
          localStorage.setItem('currentUser', JSON.stringify(currentUser));
          
          // Update user in users array
          const users = JSON.parse(localStorage.getItem('users')) || [];
          const userIndex = users.findIndex(u => u.id === currentUser.id);
          if (userIndex !== -1) {
            users[userIndex].profile = user;
            localStorage.setItem('users', JSON.stringify(users));
          }
        }
        
        // Update UI
        loadUserData();
        
        // Show success message
        showToast('Personal information updated successfully!');
      });
      
      // Security form
      document.getElementById('securityForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // In a real application, this would validate and update the password
        const currentPassword = document.getElementById('currentPassword').value;
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        if (newPassword !== confirmPassword) {
          showToast('New passwords do not match!');
          return;
        }
        
        if (newPassword.length < 6) {
          showToast('Password must be at least 6 characters long!');
          return;
        }
        
        // Update password in users array
        if (currentUser) {
          const users = JSON.parse(localStorage.getItem('users')) || [];
          const userIndex = users.findIndex(u => u.id === currentUser.id);
          if (userIndex !== -1) {
            users[userIndex].password = newPassword;
            localStorage.setItem('users', JSON.stringify(users));
          }
        }
        
        // Clear form
        document.getElementById('securityForm').reset();
        
        // Show success message
        showToast('Password updated successfully!');
      });
      
      // Add address form
      document.getElementById('addAddressForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // In a real application, this would save the address to the server
        closeAddAddressModal();
        showToast('New address added successfully!');
      });
    }

    // Open add address modal
    function openAddAddressModal() {
      document.getElementById('addAddressModal').style.display = 'flex';
    }

    // Close add address modal
    function closeAddAddressModal() {
      document.getElementById('addAddressModal').style.display = 'none';
      document.getElementById('addAddressForm').reset();
    }

    // Search products
    function searchProducts() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      
      if (searchTerm) {
        window.location.href = `shop.html?search=${encodeURIComponent(searchTerm)}`;
      } else {
        window.location.href = 'shop.html';
      }
    }

    // Show toast notification
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Allow search on Enter key
    document.getElementById('searchInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        searchProducts();
      }
    });

    // Close modal when clicking outside
    window.onclick = function(event) {
      const modal = document.getElementById('addAddressModal');
      if (event.target === modal) {
        closeAddAddressModal();
      }
    }

    // Logout functionality
    document.getElementById('logoutBtn').addEventListener('click', function(e) {
      e.preventDefault();
      
      // Clear current user session
      localStorage.removeItem('currentUser');
      
      // Redirect to login page
      window.location.href = 'login.html';
    });
  </script>
</body>
</html>